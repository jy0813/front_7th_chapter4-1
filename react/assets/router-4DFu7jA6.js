import{i as e,n as t,o as n,r,t as i}from"./index-BdELCTcR.js";const a=()=>{let e=new Set,t=t=>(e.add(t),()=>n(t)),n=t=>{e.delete(t)};return{subscribe:t,unsubscribe:n,notify:()=>e.forEach(e=>e())}},o=(e,t=window.localStorage)=>{let n=JSON.parse(t.getItem(e)??`null`),{subscribe:r,notify:i}=a();return{get:()=>n,set:r=>{try{n=r,t.setItem(e,JSON.stringify(n)),i()}catch(t){console.error(`Error setting storage item for key "${e}":`,t)}},reset:()=>{try{n=null,t.removeItem(e),i()}catch(t){console.error(`Error removing storage item for key "${e}":`,t)}},subscribe:r}},s=(e,t)=>{let{subscribe:n,notify:r}=a(),i=t;return{getState:()=>i,dispatch:t=>{let n=e(i,t);Object.is(n,i)||(i=n,r())},subscribe:n}};var c=class e{#e;#t=a();#n;#r;constructor(e=``){this.#e=new Map,this.#r=null,this.#n=e.replace(/\/$/,``),window.addEventListener(`popstate`,()=>{this.#r=this.#i(),this.#t.notify()}),document.addEventListener(`click`,e=>{let t=e.target;if(!t?.closest(`[data-link]`))return;e.preventDefault();let n=t.getAttribute(`href`)??t.closest(`[data-link]`)?.getAttribute(`href`);n&&this.push(n)})}get query(){return e.parseQuery(window.location.search)}set query(t){let n=e.getUrl(t,this.#n);this.push(n)}get params(){return this.#r?.params??{}}get route(){return this.#r}get target(){return this.#r?.handler}subscribe=this.#t.subscribe;addRoute(e,t){let n=[],r=e.replace(/:\w+/g,e=>(n.push(e.slice(1)),`([^/]+)`)).replace(/\//g,`\\/`),i=RegExp(`^${this.#n}${r}$`);this.#e.set(e,{regex:i,paramNames:n,handler:t})}#i(e=window.location.pathname){let{pathname:t}=new URL(e,window.location.origin);for(let[e,n]of this.#e){let r=t.match(n.regex);if(r){let t={};return n.paramNames.forEach((e,n)=>{t[e]=r[n+1]}),{...n,params:t,path:e}}}return null}push(e){try{let t=e.startsWith(this.#n)?e:this.#n+(e.startsWith(`/`)?e:`/`+e);`${window.location.pathname}${window.location.search}`!==t&&window.history.pushState(null,``,t),this.#r=this.#i(t),this.#t.notify()}catch(e){console.error(`라우터 네비게이션 오류:`,e)}}start(){this.#r=this.#i(),this.#t.notify()}static parseQuery=(e=window.location.search)=>{let t=new URLSearchParams(e),n={};for(let[e,r]of t)n[e]=r;return n};static stringifyQuery=e=>{let t=new URLSearchParams;for(let[n,r]of Object.entries(e))r!=null&&r!==``&&t.set(n,String(r));return t.toString()};static getUrl=(t,n=``)=>{let r={...e.parseQuery(),...t};Object.keys(r).forEach(e=>{(r[e]===null||r[e]===void 0||r[e]===``)&&delete r[e]});let i=e.stringifyQuery(r);return`${n}${window.location.pathname.replace(n,``)}${i?`?${i}`:``}`}},l=n(r(),1);function u(e){let[t]=(0,l.useState)({current:e});return t}var d=e=>typeof e==`object`&&!!e&&!Array.isArray(e);const f=(e,t,n=Object.is)=>{if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,r)=>n(t[r],e));if(d(e)&&d(t)){let r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&r.every(r=>n(e[r],t[r]))}return!1},p=(e,t)=>f(e,t,Object.is);function ee(e,t,n=p){let r=u({init:!1,deps:t,value:void 0});return(!r.current.init||!n(t,r.current.deps))&&(r.current.init=!0,r.current.deps=t,r.current.value=e()),r.current.value}function te(e,t){return ee(()=>e,t)}const m=e=>{let t=u(e);return t.current=e,te((...e)=>t.current(...e),[])},h=e=>{let t=(0,l.useRef)(null);return n=>{let r=e(n);return p(t.current,r)||(t.current=r),t.current}};var ne=e=>e;const g=(e,t=ne)=>{let n=h(t),r=()=>n(e);return(0,l.useSyncExternalStore)(e.subscribe,r,r)};var re=e=>e;const _=(e,t=re)=>{let n=h(t),r=()=>n(e.getState());return(0,l.useSyncExternalStore)(e.subscribe,r,r)};var v=null;const y=()=>v!==null,b=()=>typeof window<`u`,ie=()=>v?.data??null,ae=()=>v?.params??{},oe=()=>v?.query??{},x=b()?new c(e):null,S=()=>{if(!x)throw Error(`Router can only be used in browser environment. Use ServerRouter for SSR.`);return x},C=()=>{let e=y(),t=e?null:g(S(),({query:e})=>e);return e?oe():t};var se=e=>e;const ce=(e=se)=>{let t=y(),n=t?null:g(S(),({params:t})=>e(t));return t?e(ae()):n},w={ADD_ITEM:`cart/addItem`,REMOVE_ITEM:`cart/removeItem`,UPDATE_QUANTITY:`cart/updateQuantity`,CLEAR_CART:`cart/clearCart`,TOGGLE_SELECT:`cart/toggleSelect`,SELECT_ALL:`cart/selectAll`,DESELECT_ALL:`cart/deselectAll`,REMOVE_SELECTED:`cart/removeSelected`,LOAD_FROM_STORAGE:`cart/loadFromStorage`,SYNC_TO_STORAGE:`cart/syncToStorage`};var le={items:[],selectedAll:!1},ue=(e,t)=>e.find(e=>e.id===t);const T=s((e,t)=>{switch(t.type){case w.ADD_ITEM:{let{product:n,quantity:r=1}=t.payload;if(ue(e.items,n.productId))return{...e,items:e.items.map(e=>e.id===n.productId?{...e,quantity:e.quantity+r}:e)};{let t={id:n.productId,title:n.title,image:n.image,price:parseInt(n.lprice),quantity:r,selected:!1};return{...e,items:[...e.items,t]}}}case w.REMOVE_ITEM:return{...e,items:e.items.filter(e=>e.id!==t.payload)};case w.UPDATE_QUANTITY:{let{productId:n,quantity:r}=t.payload;return{...e,items:e.items.map(e=>e.id===n?{...e,quantity:Math.max(1,r)}:e)}}case w.CLEAR_CART:return{...e,items:[],selectedAll:!1};case w.TOGGLE_SELECT:{let n=t.payload,r=e.items.map(e=>e.id===n?{...e,selected:!e.selected}:e),i=r.length>0&&r.every(e=>e.selected);return{...e,items:r,selectedAll:i}}case w.SELECT_ALL:{let t=e.items.map(e=>({...e,selected:!0}));return{...e,items:t,selectedAll:!0}}case w.DESELECT_ALL:{let t=e.items.map(e=>({...e,selected:!1}));return{...e,items:t,selectedAll:!1}}case w.REMOVE_SELECTED:return{...e,items:e.items.filter(e=>!e.selected),selectedAll:!1};case w.LOAD_FROM_STORAGE:return{...e,...t.payload};default:return e}},le),de=(e,t=1)=>{T.dispatch({type:w.ADD_ITEM,payload:{product:e,quantity:t}})},fe=e=>{T.dispatch({type:w.REMOVE_ITEM,payload:e})},E=(e,t)=>{T.dispatch({type:w.UPDATE_QUANTITY,payload:{productId:e,quantity:t}})},pe=e=>{T.dispatch({type:w.TOGGLE_SELECT,payload:e})},me=()=>{T.dispatch({type:w.SELECT_ALL})},he=()=>{T.dispatch({type:w.DESELECT_ALL})},ge=()=>{T.dispatch({type:w.REMOVE_SELECTED})},_e=()=>{T.dispatch({type:w.CLEAR_CART})};var D=n(i(),1);const O=(0,l.memo)(({src:t,...n})=>(0,D.jsx)(`img`,{src:String(e+t).replace(`//`,`/`),...n}));O.displayName=`PublicImage`;const ve=({error:e})=>(0,D.jsx)(`div`,{className:`min-h-screen bg-gray-50 flex items-center justify-center`,children:(0,D.jsxs)(`div`,{className:`text-center`,children:[(0,D.jsx)(`div`,{className:`text-red-500 mb-4`,children:(0,D.jsx)(O,{src:`/error-large-icon.svg`,alt:`오류`,className:`mx-auto h-12 w-12`})}),(0,D.jsx)(`h1`,{className:`text-xl font-bold text-gray-900 mb-2`,children:`상품을 찾을 수 없습니다`}),(0,D.jsx)(`p`,{className:`text-gray-600 mb-4`,children:e||`요청하신 상품이 존재하지 않습니다.`}),(0,D.jsx)(`button`,{onClick:()=>window.history.back(),className:`bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2`,children:`이전 페이지`}),(0,D.jsx)(`a`,{href:`/`,"data-link":`/`,className:`bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700`,children:`홈으로`})]})});function ye(){return(0,D.jsx)(`h1`,{className:`text-xl font-bold text-gray-900`,children:(0,D.jsx)(`a`,{href:`/`,"data-link":`/`,children:`쇼핑몰`})})}function be(){return(0,D.jsx)(`footer`,{className:`bg-white shadow-sm sticky top-0 z-40`,children:(0,D.jsx)(`div`,{className:`max-w-md mx-auto py-8 text-center text-gray-500`,children:(0,D.jsxs)(`p`,{children:[`© `,new Date().getFullYear(),` 항해플러스 프론트엔드 쇼핑몰`]})})})}var xe=t();const k=(0,l.createContext)({open:()=>null,close:()=>null}),A=()=>(0,l.useContext)(k),Se=(0,l.memo)(({children:e})=>{let[t,n]=(0,l.useState)(null),r=(0,l.useCallback)(e=>{n(e)},[]),i=(0,l.useCallback)(()=>{n(null)},[]);return(0,D.jsxs)(k,{value:(0,l.useMemo)(()=>({open:r,close:i}),[r,i]),children:[e,t&&(0,xe.createPortal)((0,D.jsx)(M,{children:t}),document.body)]})}),Ce=(e=200)=>{if(typeof window>`u`)return!1;let t=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight,r=document.documentElement.scrollHeight;return t+n>=r-e},we=e=>t=>{t.key===`Escape`&&e(t)},Te=(e,t)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e(...r),n=null},t)}};typeof window<`u`&&(window.__spyCalls=[],window.__spyCallsClear=()=>{window.__spyCalls=[]});const j=(...e)=>(typeof window<`u`&&window.__spyCalls.push(e),console.log(...e)),M=Object.assign(({children:e})=>{let t=A();return(0,l.useEffect)(()=>{let e=we(()=>{t.close(),document.removeEventListener(`keydown`,e)});return document.addEventListener(`keydown`,e,{once:!0}),()=>document.removeEventListener(`keydown`,e)},[t]),(0,D.jsxs)(`div`,{className:`fixed inset-0 z-50 overflow-y-auto cart-modal`,children:[(0,D.jsx)(`div`,{className:`fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay`,onClick:t.close}),e]})},{Header:({children:e})=>{let t=A();return(0,D.jsxs)(`div`,{className:`sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between`,children:[(0,D.jsx)(`h2`,{className:`text-lg font-bold text-gray-900 flex items-center`,children:e}),(0,D.jsx)(`button`,{id:`cart-modal-close-btn`,className:`text-gray-400 hover:text-gray-600 p-1`,onClick:t.close,children:(0,D.jsx)(O,{src:`/close-icon.svg`,alt:`닫기`,className:`w-6 h-6`})})]})},Container:({children:e})=>(0,D.jsx)(`div`,{className:`flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4`,children:(0,D.jsx)(`div`,{className:`relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden`,children:e})})}),N={SHOW:`show`,HIDE:`hide`},P={message:``,type:`info`},Ee=(e,t)=>{switch(t.type){case N.HIDE:return{...P};case N.SHOW:return{message:t.payload.message,type:t.payload.type??`info`};default:return e}},De=e=>({show:(t,n)=>e({type:N.SHOW,payload:{message:t,type:n}}),hide:()=>e({type:N.HIDE})});var Oe=t(),F=(0,l.createContext)({show:()=>null,hide:()=>null}),I=(0,l.createContext)({...P}),ke=3e3;const L=()=>(0,l.useContext)(F),Ae=()=>(0,l.useContext)(I),je=(0,l.memo)(({children:e})=>{let[t,n]=(0,l.useReducer)(Ee,P),r=De(n),i=t.message!==``,a=m(r.hide),o=(0,l.useMemo)(()=>Te(a,ke),[a]),s=m(r.show),c=m((...e)=>{s(...e),o()});return(0,D.jsx)(F,{value:(0,l.useMemo)(()=>({show:c,hide:a}),[c,a]),children:(0,D.jsxs)(I,{value:t,children:[e,i&&(0,Oe.createPortal)((0,D.jsx)(Pe,{}),document.body)]})})});var Me={success:`bg-green-600`,error:`bg-red-600`,warning:`bg-yellow-600`,info:`bg-blue-600`},Ne={success:(0,D.jsx)(O,{src:`/success-icon.svg`,alt:`성공`,className:`w-5 h-5`}),error:(0,D.jsx)(O,{src:`/error-icon.svg`,alt:`오류`,className:`w-5 h-5`}),warning:(0,D.jsx)(O,{src:`/warning-icon.svg`,alt:`경고`,className:`w-5 h-5`}),info:(0,D.jsx)(O,{src:`/info-icon.svg`,alt:`정보`,className:`w-5 h-5`})};function Pe(){let{type:e,message:t}=Ae(),{hide:n}=L(),r=Me[e],i=Ne[e];return(0,D.jsx)(`div`,{className:`fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container`,children:(0,D.jsxs)(`div`,{className:`${r} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`,children:[(0,D.jsx)(`div`,{className:`flex-shrink-0`,children:i}),(0,D.jsx)(`p`,{className:`text-sm font-medium`,children:t}),(0,D.jsx)(`button`,{id:`toast-close-btn`,className:`flex-shrink-0 ml-2 text-white hover:text-gray-200`,onClick:n,children:(0,D.jsx)(O,{src:`/close-icon-white.svg`,alt:`닫기`,className:`w-4 h-4`})})]})})}var R=null,z=()=>b()?(R||=o(`shopping_cart`),R):{get:()=>null,set:()=>{},reset:()=>{},subscribe:()=>()=>{}};const Fe={get:()=>z().get(),set:e=>z().set(e),reset:()=>z().reset(),subscribe:e=>z().subscribe(e)},Ie=()=>{let[e,t]=(0,l.useState)(!1),n=_(T);(0,l.useEffect)(()=>{T.dispatch({type:w.LOAD_FROM_STORAGE,payload:Fe.get()}),t(!0)},[]),(0,l.useEffect)(()=>{e&&Fe.set(n)},[e,n])};var Le={items:[],selectedAll:!1};const B=e=>{let t=y(),n=t?null:_(T,e);return t?e(Le):n},Re=()=>{let{open:e}=A();return m(()=>e((0,D.jsx)(Ze,{})))},ze=()=>{let e=L();return m((t,n=1)=>{de(t,n),e.show(`장바구니에 추가되었습니다`,`success`)})},Be=()=>{let e=L();return{removeSelected:m(()=>{ge(),e.show(`선택된 상품들이 삭제되었습니다`,`info`)}),clear:m(()=>{_e(),e.show(`장바구니가 비워졌습니다`,`info`)})}};function Ve({id:e}){let{price:t,quantity:n,selected:r,image:i,title:a}=B((0,l.useMemo)(()=>({items:t})=>t.find(t=>t.id==e),[e])),o=t*n,s=()=>E(e,n+1),c=()=>E(e,Math.max(1,n-1)),u=t=>E(e,Math.max(1,t));return(0,D.jsxs)(`div`,{className:`flex items-center py-3 border-b border-gray-100 cart-item`,"data-product-id":e,children:[(0,D.jsx)(`label`,{className:`flex items-center mr-3`,children:(0,D.jsx)(`input`,{type:`checkbox`,checked:r,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>pe(e)})}),(0,D.jsx)(`div`,{className:`w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0`,children:(0,D.jsx)(`img`,{src:i,alt:a,className:`w-full h-full object-cover cursor-pointer cart-item-image`,"data-product-id":e})}),(0,D.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,D.jsx)(`h4`,{className:`text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title`,"data-product-id":e,children:a}),(0,D.jsxs)(`p`,{className:`text-sm text-gray-600 mt-1`,children:[t.toLocaleString(),`원`]}),(0,D.jsxs)(`div`,{className:`flex items-center mt-2`,children:[(0,D.jsx)(`button`,{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:c,children:(0,D.jsx)(O,{src:`/minus-icon.svg`,alt:`감소`,className:`w-3 h-3`})}),(0,D.jsx)(`input`,{type:`number`,value:n,min:`1`,className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:e=>u(Number(e.target.value))}),(0,D.jsx)(`button`,{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:s,children:(0,D.jsx)(O,{src:`/plus-icon.svg`,alt:`증가`,className:`w-3 h-3`})})]})]}),(0,D.jsxs)(`div`,{className:`text-right ml-3`,children:[(0,D.jsxs)(`p`,{className:`text-sm font-medium text-gray-900`,children:[o.toLocaleString(),`원`]}),(0,D.jsx)(`button`,{className:`cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800`,"data-product-id":e,onClick:()=>fe(e),children:`삭제`})]})]})}var He=(0,l.memo)(Ve),Ue=e=>{e.target.checked?me():he()},We=e=>e.reduce((e,t)=>e+t.price*t.quantity,0),Ge=e=>e.filter(e=>e.selected),Ke=({items:e})=>e.map(e=>e.id),qe=({items:e})=>We(e),Je=({items:e})=>We(Ge(e)),Ye=({items:e})=>Ge(e).length,Xe=({selectedAll:e})=>e;function Ze(){let e=B(Ke),t=B(qe),n=B(Ye),r=B(Je),i=B(Xe),a=L(),o=Be();return(0,D.jsxs)(M.Container,{children:[(0,D.jsxs)(M.Header,{children:[(0,D.jsx)(O,{src:`/cart-icon.svg`,alt:`장바구니`,className:`w-5 h-5 mr-2`}),`장바구니`,e.length>0&&(0,D.jsxs)(`span`,{className:`text-sm font-normal text-gray-600 ml-1`,children:[`(`,e.length,`)`]})]}),e.length===0?(0,D.jsx)(`div`,{className:`flex-1 flex items-center justify-center p-8`,children:(0,D.jsxs)(`div`,{className:`text-center`,children:[(0,D.jsx)(`div`,{className:`text-gray-400 mb-4`,children:(0,D.jsx)(O,{src:`/empty-cart-icon.svg`,alt:`빈 장바구니`,className:`mx-auto h-12 w-12`})}),(0,D.jsx)(`h3`,{className:`text-lg font-medium text-gray-900 mb-2`,children:`장바구니가 비어있습니다`}),(0,D.jsx)(`p`,{className:`text-gray-600`,children:`원하는 상품을 담아보세요!`})]})}):(0,D.jsxs)(`div`,{className:`flex flex-col max-h-[calc(90vh-120px)]`,children:[(0,D.jsx)(`div`,{className:`p-4 border-b border-gray-200 bg-gray-50`,children:(0,D.jsxs)(`label`,{className:`flex items-center text-sm text-gray-700`,children:[(0,D.jsx)(`input`,{type:`checkbox`,id:`cart-modal-select-all-checkbox`,checked:i,className:`w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2`,onChange:Ue}),`전체선택 (`,e.length,`개)`]})}),(0,D.jsx)(`div`,{className:`flex-1 overflow-y-auto`,children:(0,D.jsx)(`div`,{className:`p-4 space-y-4`,children:e.map(e=>(0,D.jsx)(He,{id:e},e))})})]}),e.length>0&&(0,D.jsxs)(`div`,{className:`sticky bottom-0 bg-white border-t border-gray-200 p-4`,children:[n>0&&(0,D.jsxs)(`div`,{className:`flex justify-between items-center mb-3 text-sm`,children:[(0,D.jsxs)(`span`,{className:`text-gray-600`,children:[`선택한 상품 (`,n,`개)`]}),(0,D.jsxs)(`span`,{className:`font-medium`,children:[r.toLocaleString(),`원`]})]}),(0,D.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,D.jsx)(`span`,{className:`text-lg font-bold text-gray-900`,children:`총 금액`}),(0,D.jsxs)(`span`,{className:`text-xl font-bold text-blue-600`,children:[t.toLocaleString(),`원`]})]}),(0,D.jsxs)(`div`,{className:`space-y-2`,children:[n>0&&(0,D.jsxs)(`button`,{id:`cart-modal-remove-selected-btn`,className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:o.removeSelected,children:[`선택한 상품 삭제 (`,n,`개)`]}),(0,D.jsxs)(`div`,{className:`flex gap-2`,children:[(0,D.jsx)(`button`,{id:`cart-modal-clear-cart-btn`,className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:o.clear,children:`전체 비우기`}),(0,D.jsx)(`button`,{id:`cart-modal-checkout-btn`,className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:()=>a.show(`구매 기능은 추후 구현 예정입니다.`,`info`),children:`구매하기`})]})]})]})]})}const V={SET_PRODUCTS:`products/setProducts`,ADD_PRODUCTS:`products/addProducts`,SET_LOADING:`products/setLoading`,SET_ERROR:`products/setError`,SET_CATEGORIES:`products/setCategories`,SET_CURRENT_PRODUCT:`products/setCurrentProduct`,SET_RELATED_PRODUCTS:`products/setRelatedProducts`,RESET_FILTERS:`products/resetFilters`,SETUP:`products/setup`,SET_STATUS:`products/setStatus`},H={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:`idle`,categories:{}},U=s((e,t)=>{switch(t.type){case V.SET_STATUS:return{...e,status:t.payload};case V.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:`done`};case V.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:`done`};case V.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:`done`};case V.SET_LOADING:return{...e,loading:t.payload};case V.SET_ERROR:return{...e,error:t.payload,loading:!1,status:`done`};case V.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:`done`};case V.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:`done`};case V.SETUP:return{...e,...t.payload};default:return e}},(()=>{if(typeof window>`u`)return console.log(`[Hydration] 서버 환경 - 기본 상태 반환`),H;let e=window.__INITIAL_DATA__;if(console.log(`[Hydration] window.__INITIAL_DATA__:`,e),!e)return console.log(`[Hydration] SSR 데이터 없음 - 기본 상태 반환`),H;let t={...H,products:e.products??[],categories:e.categories??{},totalCount:e.totalCount??0,currentProduct:e.product??null,relatedProducts:e.relatedProducts??[],loading:!1,status:`done`};return console.log(`[Hydration] SSR 데이터로 초기화 완료:`,{productsCount:t.products.length,hasCurrentProduct:!!t.currentProduct,status:t.status}),delete window.__INITIAL_DATA__,t})());var Qe=()=>{let e=ie();return e?{...H,products:e.products??[],categories:e.categories??{},totalCount:e.totalCount??0,currentProduct:e.product??null,relatedProducts:e.relatedProducts??[],loading:!1,status:`done`}:H};const W=()=>{let e=y(),t=e?null:_(U);return e?Qe():t};function $e({onClick:e,...t}){let n=ze(),{productId:r,title:i,brand:a,image:o,lprice:s}=t,c=Number(s),l=()=>e(r);return j(`ProductCard: ${r}`),(0,D.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card`,"data-product-id":r,children:[(0,D.jsx)(`div`,{className:`aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image`,onClick:l,children:(0,D.jsx)(`img`,{src:o,alt:i,className:`w-full h-full object-cover hover:scale-105 transition-transform duration-200`,loading:`lazy`})}),(0,D.jsxs)(`div`,{className:`p-3`,children:[(0,D.jsxs)(`div`,{className:`cursor-pointer product-info mb-3`,onClick:l,children:[(0,D.jsx)(`h3`,{className:`text-sm font-medium text-gray-900 line-clamp-2 mb-1`,children:i}),(0,D.jsx)(`p`,{className:`text-xs text-gray-500 mb-2`,children:a}),(0,D.jsxs)(`p`,{className:`text-lg font-bold text-gray-900`,children:[c.toLocaleString(),`원`]})]}),(0,D.jsx)(`button`,{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":r,onClick:()=>n(t),children:`장바구니 담기`})]})]})}function et(){return(0,D.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse`,children:[(0,D.jsx)(`div`,{className:`aspect-square bg-gray-200`}),(0,D.jsxs)(`div`,{className:`p-3`,children:[(0,D.jsx)(`div`,{className:`h-4 bg-gray-200 rounded mb-2`}),(0,D.jsx)(`div`,{className:`h-3 bg-gray-200 rounded w-2/3 mb-2`}),(0,D.jsx)(`div`,{className:`h-5 bg-gray-200 rounded w-1/2 mb-3`}),(0,D.jsx)(`div`,{className:`h-8 bg-gray-200 rounded`})]})]})}function tt(){let{relatedProducts:e}=W();return e.length===0?null:(0,D.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm`,children:[(0,D.jsxs)(`div`,{className:`p-4 border-b border-gray-200`,children:[(0,D.jsx)(`h2`,{className:`text-lg font-bold text-gray-900`,children:`관련 상품`}),(0,D.jsx)(`p`,{className:`text-sm text-gray-600`,children:`같은 카테고리의 다른 상품들`})]}),(0,D.jsx)(`div`,{className:`p-4`,children:(0,D.jsx)(`div`,{className:`grid grid-cols-2 gap-3 responsive-grid`,children:e.slice(0,20).map(e=>(0,D.jsxs)(`div`,{className:`bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer`,"data-product-id":e.productId,onClick:()=>x.push(`/product/${e.productId}/`),children:[(0,D.jsx)(`div`,{className:`aspect-square bg-white rounded-md overflow-hidden mb-2`,children:(0,D.jsx)(`img`,{src:e.image,alt:e.title,className:`w-full h-full object-cover`,loading:`lazy`})}),(0,D.jsx)(`h3`,{className:`text-sm font-medium text-gray-900 mb-1 line-clamp-2`,children:e.title}),(0,D.jsxs)(`p`,{className:`text-sm font-bold text-blue-600`,children:[Number(e.lprice).toLocaleString(),`원`]})]},e.productId))})})]})}function nt(e){j(`ProductDetail: ${e.productId}`);let t=ze(),{productId:n,title:r,image:i,lprice:a,brand:o,category1:s,category2:c}=e,[u,d]=(0,l.useState)(1),f=Number(a),p=[];s&&p.push({name:s,category:`category1`,value:s}),c&&p.push({name:c,category:`category2`,value:c});let ee=()=>d(Math.min(u+1,100)),te=()=>d(Math.max(u-1,1)),m=async e=>{let t=new URLSearchParams(e).toString();x.push(`/?${t}`)},h=async()=>{let t={...e?.category1&&{category1:e?.category1},...e?.category2&&{category2:e?.category2}},n=new URLSearchParams(t).toString();x.push(`/?${n}`)};return(0,D.jsxs)(`div`,{children:[p.length>0&&(0,D.jsx)(`nav`,{className:`mb-4`,children:(0,D.jsxs)(`div`,{className:`flex items-center space-x-2 text-sm text-gray-600`,children:[(0,D.jsx)(`a`,{href:`/`,"data-link":`/`,className:`hover:text-blue-600 transition-colors`,children:`홈`}),p.map((e,t)=>[(0,D.jsx)(O,{src:`/chevron-right-icon.svg`,alt:`오른쪽 화살표`,className:`w-4 h-4 text-gray-400`},`${e.category}-icon`),(0,D.jsx)(`button`,{className:`breadcrumb-link`,[`data-${e.category}`]:e.value,onClick:()=>m(t===0?{category1:e.value}:{category1:p[t-1].value,category2:e.value}),children:e.name},`${e.category}-btn`)]).flat()]})}),(0,D.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm mb-6`,children:[(0,D.jsxs)(`div`,{className:`p-4`,children:[(0,D.jsx)(`div`,{className:`aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4`,children:(0,D.jsx)(`img`,{src:i,alt:r,className:`w-full h-full object-cover product-detail-image`})}),(0,D.jsxs)(`div`,{children:[(0,D.jsx)(`p`,{className:`text-sm text-gray-600 mb-1`,children:o}),(0,D.jsx)(`h1`,{className:`text-xl font-bold text-gray-900 mb-3`,children:r}),!1,(0,D.jsx)(`div`,{className:`mb-4`,children:(0,D.jsxs)(`span`,{className:`text-2xl font-bold text-blue-600`,children:[f.toLocaleString(),`원`]})}),(0,D.jsxs)(`div`,{className:`text-sm text-gray-600 mb-4`,children:[`재고 `,100 .toLocaleString(),`개`]}),``]})]}),(0,D.jsxs)(`div`,{className:`border-t border-gray-200 p-4`,children:[(0,D.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,D.jsx)(`span`,{className:`text-sm font-medium text-gray-900`,children:`수량`}),(0,D.jsxs)(`div`,{className:`flex items-center`,children:[(0,D.jsx)(`button`,{id:`quantity-decrease`,className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:te,children:(0,D.jsx)(O,{src:`/quantity-minus-icon.svg`,alt:`수량 감소`,className:`w-4 h-4`})}),(0,D.jsx)(`input`,{type:`number`,id:`quantity-input`,value:u,onInput:e=>d(Number(e.currentTarget.value)),min:`1`,max:100,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),(0,D.jsx)(`button`,{id:`quantity-increase`,className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:ee,children:(0,D.jsx)(O,{src:`/quantity-plus-icon.svg`,alt:`수량 증가`,className:`w-4 h-4`})})]})]}),(0,D.jsx)(`button`,{id:`add-to-cart-btn`,"data-product-id":n,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:()=>t(e,u),children:`장바구니 담기`})]})]}),(0,D.jsx)(`div`,{className:`mb-6`,children:(0,D.jsx)(`button`,{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:h,children:`상품 목록으로 돌아가기`})}),(0,D.jsx)(tt,{})]})}var G=()=>b()?``:`http://localhost:${{}.PORT||5173}`;async function K(e={}){let{limit:t=20,search:n=``,category1:r=``,category2:i=``,sort:a=`price_asc`}=e,o=e.current??e.page??1,s=new URLSearchParams({page:o.toString(),limit:t.toString(),...n&&{search:n},...r&&{category1:r},...i&&{category2:i},sort:a});return await(await fetch(`${G()}/api/products?${s}`)).json()}async function rt(e){return await(await fetch(`${G()}/api/products/${e}`)).json()}async function it(){return await(await fetch(`${G()}/api/categories`)).json()}var q=(e,t=`알 수 없는 오류 발생`)=>e instanceof Error?e.message:t;const at=async()=>{let e=U.getState();if(console.log(`[loadProductsAndCategories] 현재 상태:`,{productsCount:e.products.length,status:e.status,loading:e.loading}),e.products.length>0&&e.status===`done`){console.log(`[loadProductsAndCategories] SSR 데이터 있음 - fetch 스킵`);return}console.log(`[loadProductsAndCategories] 데이터 fetch 시작`),S().query={current:void 0},U.dispatch({type:V.SETUP,payload:{...H,loading:!0,status:`pending`}});try{let[{products:e,pagination:{total:t}},n]=await Promise.all([K(S().query),it()]);U.dispatch({type:V.SETUP,payload:{products:e,categories:n,totalCount:t,loading:!1,status:`done`}})}catch(e){throw U.dispatch({type:V.SET_ERROR,payload:q(e)}),e}},J=async(e=!0)=>{try{U.dispatch({type:V.SETUP,payload:{loading:!0,status:`pending`,error:null}});let{products:t,pagination:{total:n}}=await K(S().query),r={products:t,totalCount:n};if(e){U.dispatch({type:V.SET_PRODUCTS,payload:r});return}U.dispatch({type:V.ADD_PRODUCTS,payload:r})}catch(e){throw U.dispatch({type:V.SET_ERROR,payload:q(e)}),e}},ot=async()=>{let e=U.getState();!(e.products.length<e.totalCount)||e.loading||(S().query={current:Number(S().query.current??1)+1},await J(!1))},st=e=>{S().query={search:e,current:1}},Y=e=>{S().query={...e,current:1}},ct=e=>{S().query={sort:e,current:1}},lt=e=>{S().query={limit:e,current:1}},ut=async e=>{try{let t=U.getState().currentProduct;if(e===t?.productId){t.category2&&await dt(t.category2,e);return}U.dispatch({type:V.SETUP,payload:{...H,currentProduct:null,loading:!0,status:`pending`}});let n=await rt(e);U.dispatch({type:V.SET_CURRENT_PRODUCT,payload:n}),n.category2&&await dt(n.category2,e)}catch(e){throw console.error(`상품 상세 페이지 로드 실패:`,e),U.dispatch({type:V.SET_ERROR,payload:q(e)}),e}},dt=async(e,t)=>{try{let n=(await K({category2:e,limit:`20`,page:`1`})).products.filter(e=>e.productId!==t);U.dispatch({type:V.SET_RELATED_PRODUCTS,payload:n})}catch(e){console.error(`관련 상품 로드 실패:`,e),U.dispatch({type:V.SET_RELATED_PRODUCTS,payload:[]})}},ft=async()=>{if(S().route?.path===`/`&&Ce(200)){let e=U.getState(),t=e.products.length<e.totalCount;if(e.loading||!t)return;try{await ot()}catch(e){console.error(`무한 스크롤 로드 실패:`,e)}}};var pt=async()=>{try{await J(!0)}catch(e){console.error(`재시도 실패:`,e)}},mt=async e=>{x.push(`/product/${e}/`)};function ht(){let{products:e,loading:t,error:n,totalCount:r}=W(),i=e.length<r;return n?(0,D.jsxs)(`div`,{className:`text-center py-12`,children:[(0,D.jsx)(`div`,{className:`text-red-500 mb-4`,children:(0,D.jsx)(O,{src:`/error-large-icon.svg`,alt:`오류`,className:`mx-auto h-12 w-12`})}),(0,D.jsx)(`h3`,{className:`text-lg font-medium text-gray-900 mb-2`,children:`오류가 발생했습니다`}),(0,D.jsx)(`p`,{className:`text-gray-600 mb-4`,children:n}),(0,D.jsx)(`button`,{id:`retry-btn`,className:`bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700`,onClick:pt,children:`다시 시도`})]}):!t&&e.length===0?(0,D.jsxs)(`div`,{className:`text-center py-12`,children:[(0,D.jsx)(`div`,{className:`text-gray-400 mb-4`,children:(0,D.jsx)(O,{src:`/search-large-icon.svg`,alt:`검색`,className:`mx-auto h-12 w-12`})}),(0,D.jsx)(`h3`,{className:`text-lg font-medium text-gray-900 mb-2`,children:`상품을 찾을 수 없습니다`}),(0,D.jsx)(`p`,{className:`text-gray-600`,children:`다른 검색어를 시도해보세요.`})]}):(0,D.jsxs)(`div`,{children:[r>0&&(0,D.jsxs)(`div`,{className:`mb-4 text-sm text-gray-600`,children:[`총 `,(0,D.jsxs)(`span`,{className:`font-medium text-gray-900`,children:[r.toLocaleString(),`개`]}),`의 상품`]}),(0,D.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 mb-6`,id:`products-grid`,children:[e.map(e=>(0,D.jsx)($e,{...e,onClick:mt},e.productId)),t&&Array.from({length:6}).map((e,t)=>(0,D.jsx)(et,{},t))]}),t&&e.length>0&&(0,D.jsx)(`div`,{className:`text-center py-4`,children:(0,D.jsxs)(`div`,{className:`inline-flex items-center`,children:[(0,D.jsx)(O,{src:`/loading-icon.svg`,alt:`로딩`,className:`animate-spin h-5 w-5 text-blue-600 mr-2`}),(0,D.jsx)(`span`,{className:`text-sm text-gray-600`,children:`상품을 불러오는 중...`})]})}),!i&&e.length>0&&!t&&(0,D.jsx)(`div`,{className:`text-center py-4 text-sm text-gray-500`,children:`모든 상품을 확인했습니다`}),(0,D.jsx)(`div`,{id:`scroll-trigger`,className:`h-4`})]})}const gt=()=>{let{search:e,limit:t,sort:n,category1:r,category2:i}=C(),a={category1:r,category2:i},o=(0,l.useRef)(!0);return(0,l.useEffect)(()=>{if(o.current){o.current=!1;let e=U.getState();if(e.products.length>0&&e.status===`done`){console.log(`[useProductFilter] SSR 데이터 있음 - 첫 로드 스킵`);return}}J(!0)},[e,t,n,r,i]),{searchQuery:e,limit:t,sort:n,category:a}},_t=()=>{let e=ce(e=>e.id);(0,l.useEffect)(()=>{ut(e)},[e])};var vt=[10,20,50,100],yt=[{value:`price_asc`,label:`가격 낮은순`},{value:`price_desc`,label:`가격 높은순`},{value:`name_asc`,label:`이름순`},{value:`name_desc`,label:`이름 역순`}],bt=async e=>{if(e.key===`Enter`){let t=e.currentTarget.value.trim();try{st(t)}catch(e){console.error(`검색 실패:`,e)}}},xt=async e=>{let t=parseInt(e.target.value);try{lt(t)}catch(e){console.error(`상품 수 변경 실패:`,e)}},St=async e=>{let t=e.target.value;try{ct(t)}catch(e){console.error(`정렬 변경 실패:`,e)}},X=async e=>{let t=e.currentTarget.getAttribute(`data-breadcrumb`);try{if(t===`reset`)Y({category1:``,category2:``});else if(t===`category1`){let t=e.currentTarget.getAttribute(`data-category1`);Y({...t&&{category1:t},category2:``})}}catch(e){console.error(`브레드크럼 네비게이션 실패:`,e)}},Ct=async e=>{let t=e.currentTarget.getAttribute(`data-category1`);if(t)try{Y({category1:t,category2:``})}catch(e){console.error(`1depth 카테고리 선택 실패:`,e)}},wt=async e=>{let t=e.currentTarget.getAttribute(`data-category1`),n=e.currentTarget.getAttribute(`data-category2`);if(!(!t||!n))try{Y({category1:t,category2:n})}catch(e){console.error(`2depth 카테고리 선택 실패:`,e)}};function Tt(){let{categories:e}=W(),{searchQuery:t,limit:n=`20`,sort:r,category:i}=gt(),a=Object.keys(e).length>0?Object.keys(e):[],o=vt.map(e=>(0,D.jsxs)(`option`,{value:e,children:[e,`개`]},e)),s=yt.map(({value:e,label:t})=>(0,D.jsx)(`option`,{value:e,children:t},e)),c=a.map(e=>(0,D.jsx)(`button`,{"data-category1":e,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:Ct,children:e},e));return(0,D.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4`,children:[(0,D.jsx)(`div`,{className:`mb-4`,children:(0,D.jsxs)(`div`,{className:`relative`,children:[(0,D.jsx)(`input`,{type:`text`,id:`search-input`,placeholder:`상품명을 검색해보세요...`,defaultValue:t,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:bt}),(0,D.jsx)(`div`,{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none`,children:(0,D.jsx)(O,{src:`/search-icon.svg`,alt:`검색`,className:`h-5 w-5 text-gray-400`})})]})}),(0,D.jsxs)(`div`,{className:`space-y-3`,children:[(0,D.jsxs)(`div`,{className:`space-y-2`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`label`,{className:`text-sm text-gray-600`,children:`카테고리:`}),[`전체`,i.category1,i.category2].filter((e,t)=>t===0||!!e).map((e,t)=>t==0?(0,D.jsx)(`button`,{"data-breadcrumb":`reset`,className:`text-xs hover:text-blue-800 hover:underline`,onClick:X,children:`전체`},`reset`):t===1?(0,D.jsxs)(l.Fragment,{children:[(0,D.jsx)(`span`,{className:`text-xs text-gray-500`,children:`>`}),(0,D.jsx)(`button`,{"data-breadcrumb":`category1`,"data-category1":e,className:`text-xs hover:text-blue-800 hover:underline`,onClick:X,children:e})]},e):(0,D.jsxs)(l.Fragment,{children:[(0,D.jsx)(`span`,{className:`text-xs text-gray-500`,children:`>`}),(0,D.jsx)(`span`,{className:`text-xs text-gray-600 cursor-default`,children:e})]},e))]}),!i.category1&&(0,D.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:a.length>0?c:(0,D.jsx)(`div`,{className:`text-sm text-gray-500 italic`,children:`카테고리 로딩 중...`})}),i.category1&&e[i.category1]&&(0,D.jsx)(`div`,{className:`space-y-2`,children:(0,D.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:Object.keys(e[i.category1]).map(e=>{let t=i.category2===e;return(0,D.jsx)(`button`,{"data-category1":i.category1,"data-category2":e,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${t?`bg-blue-100 border-blue-300 text-blue-800`:`bg-white border-gray-300 text-gray-700 hover:bg-gray-50`}`,onClick:wt,children:e},e)})})})]}),(0,D.jsxs)(`div`,{className:`flex gap-2 items-center justify-between`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`label`,{htmlFor:`limit-select`,className:`text-sm text-gray-600`,children:`개수:`}),(0,D.jsx)(`select`,{id:`limit-select`,className:`text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:xt,defaultValue:Number(n),children:o})]}),(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`label`,{htmlFor:`sort-select`,className:`text-sm text-gray-600`,children:`정렬:`}),(0,D.jsx)(`select`,{id:`sort-select`,className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:St,defaultValue:r,children:s})]})]})]})]})}const Z=({headerLeft:e,children:t})=>{let n=Re(),r=B(e=>e.items.length);return(0,D.jsxs)(`div`,{className:`min-h-screen bg-gray-50`,children:[(0,D.jsx)(`header`,{className:`bg-white shadow-sm sticky top-0 z-40`,children:(0,D.jsx)(`div`,{className:`max-w-md mx-auto px-4 py-4`,children:(0,D.jsxs)(`div`,{className:`flex items-center justify-between`,children:[e,(0,D.jsx)(`div`,{className:`flex items-center space-x-2`,children:(0,D.jsxs)(`button`,{id:`cart-icon-btn`,className:`relative p-2 text-gray-700 hover:text-gray-900 transition-colors`,onClick:n,children:[(0,D.jsx)(O,{src:`/cart-header-icon.svg`,alt:`장바구니`,className:`w-6 h-6`}),r>0&&(0,D.jsx)(`span`,{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center`,children:r>99?`99+`:r})]})})]})})}),(0,D.jsx)(`main`,{className:`max-w-md mx-auto px-4 py-4`,children:t}),(0,D.jsx)(be,{})]})};var Et=(0,D.jsx)(`h1`,{className:`text-xl font-bold text-gray-900`,children:(0,D.jsx)(`a`,{href:`/`,"data-link":`/`,children:`쇼핑몰`})}),Dt=!1,Ot=()=>{Dt||=(window.addEventListener(`scroll`,ft),!0)},kt=()=>{Dt&&=(window.removeEventListener(`scroll`,ft),!1)};const At=()=>((0,l.useEffect)(()=>(document.title=`쇼핑몰 - 홈`,Ot(),at(),kt),[]),(0,D.jsxs)(Z,{headerLeft:Et,children:[(0,D.jsx)(Tt,{}),(0,D.jsx)(`div`,{className:`mb-6`,children:(0,D.jsx)(ht,{})})]})),jt=()=>{let{currentProduct:e,error:t,loading:n}=W();return _t(),(0,l.useEffect)(()=>{e&&(document.title=`${e.title} - 쇼핑몰`)},[e]),(0,D.jsx)(Z,{headerLeft:(0,D.jsxs)(`div`,{className:`flex items-center space-x-3`,children:[(0,D.jsx)(`button`,{onClick:()=>window.history.back(),className:`p-2 text-gray-700 hover:text-gray-900 transition-colors`,children:(0,D.jsx)(O,{src:`/back-icon.svg`,alt:`뒤로`,className:`w-6 h-6`})}),(0,D.jsx)(`h1`,{className:`text-lg font-bold text-gray-900`,children:`상품 상세`})]}),children:(0,D.jsxs)(`div`,{className:`min-h-screen bg-gray-50 p-4`,children:[n&&(0,D.jsx)(`div`,{className:`min-h-screen bg-gray-50 flex items-center justify-center`,children:(0,D.jsxs)(`div`,{className:`text-center`,children:[(0,D.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4`}),(0,D.jsx)(`p`,{className:`text-gray-600`,children:`상품 정보를 불러오는 중...`})]})}),t&&(0,D.jsx)(ve,{error:t}),e&&(0,D.jsx)(nt,{...e})]})})},Q=()=>(0,D.jsx)(Z,{headerLeft:(0,D.jsx)(ye,{}),children:(0,D.jsxs)(`div`,{className:`text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg`,children:[(0,D.jsx)(O,{src:`/404.svg`,alt:`페이지를 찾을 수 없습니다`}),(0,D.jsx)(`a`,{href:`/`,"data-link":`/`,className:`inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors`,children:`홈으로`})]})}),$=new class{routes=[];addRoute(e,t){let{pattern:n,paramNames:r}=this.pathToRegex(e);this.routes.push({path:e,pattern:n,paramNames:r,component:t})}pathToRegex(e){let t=[],n=`^${e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`).replace(/:([a-zA-Z_][a-zA-Z0-9_]*)/g,(e,n)=>(t.push(n),`([^/]+)`))}$`.replace(/\\\/$/,`\\/?$`);return{pattern:new RegExp(n),paramNames:t}}findRoute(e){let t=e.split(`?`)[0];for(let e of this.routes){let n=t.match(e.pattern);if(n){let t={};return e.paramNames.forEach((e,r)=>{t[e]=n[r+1]}),{component:e.component,params:t}}}return null}getNotFoundComponent(){return Q}};$.addRoute(`/`,At),$.addRoute(`/product/:id/`,jt);const Mt=()=>{let e=y(),t=e?null:g(S(),({target:e})=>e);return e?$.getNotFoundComponent():t};export{je as a,S as getRouter,Ie as i,jt as n,Se as o,At as r,x as router,b as s,Q as t,Mt as useCurrentPage,ce as useRouterParams,C as useRouterQuery};